// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Users {
  user_id  Int    @id
  password String
  role     String
}

model Professors {
  professor_id  Int             @id
  first_name    String
  last_name     String
  email         String
  phone_number  Int
  dept_id       Int
  department    Departments     @relation(fields: [department_id], references: [dept_id])
  department_id Int             @unique
  Reservation   Reservation[]
  Notifications Notifications[]
  Maintenance   Maintenance[]
}

model Departments {
  dept_id       Int         @id
  dept_name     String
  dept_head     Professors?
  dept_location String
  Courses       Courses[]
}

model Labs {
  lab_id           Int                @id
  lab_name         String
  capacity         Int
  location         String
  Usage_Statistics Usage_Statistics[]
  Maintenance      Maintenance[]
}

model Reservation {
  reservation_id String     @id @default(uuid())
  professor      Professors @relation(fields: [professor_id], references: [professor_id])
  professor_id   Int
  date           DateTime
  start_time     DateTime
  end_time       DateTime
  type           String
  note           String?
}

model Usage_Statistics {
  lab                Labs @relation(fields: [lab_id], references: [lab_id])
  lab_id             Int  @id
  reservation_count  Int
  average_usage_time Int?
  peak_usage_period  Int?
}

model Courses {
  course_id   String        @id
  course_name String
  department  Departments[]
}

model Notifications {
  notification_id        String     @id @default(uuid())
  professor              Professors @relation(fields: [professorsProfessor_id], references: [professor_id])
  professorsProfessor_id Int
  message                String?
  time_stamp             DateTime
}

model Maintenance {
  maintenance_id         String     @id @default(uuid())
  lab                    Labs       @relation(fields: [labsLab_id], references: [lab_id])
  labsLab_id             Int
  professor              Professors @relation(fields: [professorsProfessor_id], references: [professor_id])
  professorsProfessor_id Int
  date                   DateTime
  issue_type             String
  issue_description      String?
  status                 String
}
